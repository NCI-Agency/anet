import { Meta } from "@storybook/addon-docs"

<Meta title="0. ANET Stories/Attachments" />

## Attachments

When [so configured](#attachment-settings-in-the-dictionary), ANET allows uploading of attachments
to various objects:

- [Locations](#location-attachments)
- [Organizations](#organization-attachments)
- [People](#person-attachments)
- [Reports](#report-attachments)

### Attachment settings in the dictionary

There are two important settings in the ANET dictionary regarding the attachment feature:

- `fields.attachment.featureDisabled`: if this is set to `true`, it means attachments are disabled
  completely; this setting has precedence over the next setting
- `fields.attachment.restrictToAdmins`: if this is set to `true`, it means only admins can
  manipulate attachments, but other users can still view them

Not that avatars for people are also implemented as attachments. When attachments are disabled,
avatars always use the default avatar, and avatars can not be set or changed.

When attachments are restricted to admins, they can set people's avatars, and these will be visible.
Users can also clear their own avatar, but not set a new one, as only admins can do that.

Other relevant settings are:

- `fields.attachment.classification`: this defines the available classification labels for
   attachments
- `fields.attachment.mimeTypes`: this defines the available MIME types for attachments, e.g.
  * application/pdf
  * image/avif
  * image/gif
  * image/jpeg
  * image/png
  * image/webp
  * text/plain

### Location attachments

Any ANET superuser or admin can upload attachments for locations.

### Organization attachments

ANET superusers can upload attachments for organizations in their hierarchy, and admins can upload
attachments for any organization.

### Person attachments

Users can upload attachments for themselves, and also pick an image from these attachments to serve
as their avatar. Note that this stores the selected avatar as a new attachment, so the original
image is still available.

ANET superusers can upload attachments for people in their organization hierarchy, and admins can
upload attachments for any person.

### Report attachments

Report authors can upload attachments for their reports. During the approval workflow, approvers can
also upload attachment for a report.
