"$schema": "https://json-schema.org/draft/2019-09/schema"
"$id": https://raw.githubusercontent.com/NCI-Agency/anet/main/src/main/resources/anet-schema.yml

#########################################################
### $defs
#########################################################
$defs:

# base definition for a value with a description
  describedValue:
    type: object
    required: [value, description]
    properties:
      value:
        type: string
      description:
        type: string

# base definition for all Fields. Every field is assumed to have a label
  labeledField:
    type: object
    required: [label]
    properties:
      label:
        type: string
        title: The label for this field
        description: Used in the UI where a label for the field is shown.
      color:
        type: string
        title: The color of the label, optional
        description: Used in the UI where a label for the field is shown.

# definition for fields that allow free-form entry
  inputField:
    unevaluatedProperties: false
    allOf:
    - "$ref": "#/$defs/labeledField"
    - properties:
        placeholder:
          type: string
          title: The placeholder for this field
          description: Used in the UI where a placeholder for the field is shown (example input).
        asA:
          type: string
          title: The bootstrap component class
          description: Used to determine how the user interface of this particular field looks.
        maxTextFieldLength:
          type: integer
          minimum: 1
          description: Used in the UI for a text input field's maximum input length.
        style:
          type: object
          title: Optional styling for the bootstrap component class
          description: Used for styling this field.
          additionalProperties: true

# definition for fields that present a choice to be selected from
  choiceField:
    unevaluatedProperties: false
    allOf:
    - "$ref": "#/$defs/labeledField"
    - properties:
        enum:
          type: object
          title: The placeholder for this field
          description: Used in the UI where a placeholder for the field is shown (example input).
          additionalProperties:
            "$ref": "#/$defs/labeledField"
      required: [enum]

# definition for custom fields
  customField:
    type: object
    unevaluatedProperties: true # FIXME: ugly work-around for customSensitiveInformation
    required: [type]
    properties:
      test:
        type: string
        title: optional test condition for showing this field
      type:
        title: value type field
        type: string
        enum: [text, number, date, datetime, json, enum, enumset, array_of_objects, anet_object, array_of_anet_objects, special_field]
      typeError:
        title: custom value for type error
        type: string
      label:
        type: string
      helpText:
        type: string
      visibleWhen:
        type: string
      style:
        type: object
      placeholder:
        type: string
      asA:
        type: string
      filters:
        type: array
        uniqueItems: true
        items:
          type: object
          title: filterType
          properties:
            filterField:
              type: string
            filterValue:
              type: [array, string, number, boolean]
      deprecated:
        type: boolean
      validations:
        type: array
        items:
          type: object
          properties:
            type:
              type: string
            params:
              type: array
          required: [type]
      aggregation:
        type: object
        properties:
          aggregationType:
            type: string
            enum: [countPerDate, countPerValue, countReportsByTask, likertScaleAndPieAgg, numbersList, objectsList, richText, valuesList]
          widget:
            type: string
            enum: [default, calendar, iqrBoxPlot, likertScale, likertScaleAndPie, pie, reportsByTask, reportsMap, richText]

    dependentSchemas:
      type:
        oneOf:
        - properties:
            type:
              enum: [text, number, date, datetime, json]
        - properties:
            type:
              enum: [enum, enumset]
            choices:
              type: object
          required: [choices]
        - properties:
            type:
              enum: [array_of_objects]
            addButtonLabel:
              type: string
            objectLabel:
              type: string
            objectFields:
              type: object
              additionalProperties:
                "$ref": "#/$defs/customField"
          required: [addButtonLabel, objectLabel, objectFields]
        - properties:
            type:
              enum: [anet_object, array_of_anet_objects]
            types:
              type: array
              uniqueItems: true
              items:
                type: string
                enum: [Location, Organization, Person, Position, Report, Task]
          required: [types]
        - properties:
            type:
              enum: [special_field]
            widget:
              title: custom widget for field
              type: string
              enum: [likertScale, richTextEditor, default]
          required: [widget]
          dependentSchemas:
            widget:
              oneOf:
              - properties:
                  widget:
                    enum: [default]
              - properties:
                  widget:
                    enum: [richTextEditor]
              - properties:
                  widget:
                    enum: [likertScale]
                  levels:
                    type: array
                    uniqueItems: true
                    items:
                      type: object
                      title: likert scale range
                      properties:
                        color:
                          type: string
                        endValue:
                          type: number
                        label:
                          type: string
                required: [levels]

# definition for questions
  questions:
    title: questions to respond when assessing
    type: object
    additionalProperties:
      "$ref": "#/$defs/customField"

# definition for questionSets
  questionSets:
    title: subset of questions
    type: object
    additionalProperties:
      type: object
      additionalProperties: false
      properties:
        label:
          type: string
          title: label for this question set
        description:
          type: string
          title: description for this question set that will be shown as help text
        test:
          type: string
          title: optional test condition for showing this question set
        questions:
          "$ref": "#/$defs/questions"
        questionSets:
          "$ref": "#/$defs/questionSets"

# definition for assessment configuration
  assessmentDef:
    type: object
    unevaluatedProperties: false
    required: [recurrence]
    properties:
      recurrence:
        title: recurrence of an assessment
        type: string
        enum: [once, daily, weekly, biweekly, semimonthly, monthly, quarterly, semiannually, annually, ondemand]
        default: once
      relatedObjectType:
        title: object type context in which the assessment will be made
        type: string
        enum: [report]
      test:
        type: string
        title: optional test condition for showing this assessment
      onDemandAssessmentExpirationDays:
        type: integer
        minimum: 1
        title: The number of days before an on-demand assessment expires
        description: Used in the UI to determine which on-demand assessments have expired
      label:
        title: assessment label
        type: string
        description: Used in the title of the assessment. If not specified, recurrence type is used instead and the assessments with the same recurrence type will have the same title!
      authorizationGroupUuids:
        type: object
        additionalProperties: false
        properties:
          read:
            title: The list of authorization group uuid's that have read access to this assessment. If not specified, anyone can read! An empty array denies everyone access (except those who can write).
            type: array
            uniqueItems: true
            items:
              type: string
          write:
            title: The list of authorization group uuid's that have write (i.e. create/update/delete) access to this assessment. If not specified, anyone can write! An empty array denies everyone access.
            type: array
            uniqueItems: true
            items:
              type: string
      questions:
        "$ref": "#/$defs/questions"
      questionSets:
        "$ref": "#/$defs/questionSets"
    dependentSchemas:
      recurrence:
        oneOf:
        - properties:
            recurrence:
              enum: [daily, weekly, biweekly, semimonthly, monthly, quarterly, semiannually, annually]
        - properties:
            recurrence:
              enum: [once]
          required: [relatedObjectType]
        - properties:
            recurrence:
              enum: [ondemand]
            questions:
              properties:
                allOf:
                - "$ref": "#/$defs/questions"
                - assessmentDate: "#/$defs/customField"
                - expirationDate: "#/$defs/customField"
              required: [assessmentDate]

# definition for custom sensitive information
  customSensitiveInformation:
    allOf:
    - "$ref": "#/$defs/customField"
    - properties:
        tooltipText:
          type: string
        authorizationGroupUuids:
          type: array
          uniqueItems: true
          items:
            type: string
            description: The list of authorization group uuid's that have access to this custom sensitive information. If not specified, anyone has access! An empty array denies everyone access.

#########################################################
### schema root
#########################################################
type: object
additionalProperties: false
required: [keycloakConfiguration, CONNECTION_ERROR_MSG, VERSION_CHANGED_MSG, SUPPORT_EMAIL_ADDR, dateFormats, reportWorkflow, maxTextFieldLength, fields, pinned_ORGs, non_reporting_ORGs, domainNames, activeDomainNames, imagery]
properties:
  keycloakConfiguration:
    type: object
    additionalProperties: true
    title: Client-side Keycloak configuration properties
    description: Automatically defined based on the `keycloakConfiguration` settings in `anet.yml`

  CONNECTION_ERROR_MSG:
    type: string
    description: Banner text when the connection is lost
  VERSION_CHANGED_MSG:
    type: string
    description: Banner text when there is a new version of ANET
  SUPPORT_EMAIL_ADDR:
    type: string
    title: The support email address
    description: The email address where support requests can be sent.

  engagementsIncludeTimeAndDuration:
    type: boolean
    default: false
    title: Whether engagements also include a time and a duration
    description: Used for report engagements; if set to `true`, you might also want to supply dateFormats.forms.inputWithTime and dateFormats.forms.longWithTime

  dateFormats:
    type: object
    additionalProperties: false
    required: [email, excel, forms]
    properties:
      email:
        type: object
        additionalProperties: false
        required: [date]
        properties:
          date:
            type: string
            title: The date format for email
            description: Used in report emails; should be easy to read, e.g. "6 December 1998"; see https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
          withTime:
            type: string
            title: The date format including the time for email if `engagementsIncludeTimeAndDuration` is `true`
            description: Used to show the report engagement date/time in report emails; should be easy to read, e.g. "6 December 1998 @ 13:45"; see see https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
      excel:
        type: string
        title: The date format for Excel export
        description: Used in Excel exports of report lists, e.g. "6 December 1998"; see https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
      forms:
        type: object
        additionalProperties: false
        required: [input, displayShort, displayLong]
        properties:
          input:
            type: object
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The supported date formats for form input fields
                  description: Used in date inputs in the user interface, the first one is used as placeholder; should be easy to type, e.g. "06-12-1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The supported date/time formats if `engagementsIncludeTimeAndDuration` is `true`
                  description: Used for the report engagement date input in the user interface, the first one is used as placeholder; should be easy to type, e.g. "06-12-1998 15:30"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
          displayShort:
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: string
                title: The short date format for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "6 December 1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: string
                title: The date format including the time for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "6 December 1998 @ 13:45"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
          displayLong:
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: string
                title: The long date format for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "Sunday, 6 December 1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: string
                title: The long date/time format if `engagementsIncludeTimeAndDuration` is `true`
                description: Used to show the report engagement date/time in the user interface; should be easy to read, e.g. "Sunday, 6 December 1998 @ 15:30"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.

  menuOptions:
    type: object
    additionalProperties: false
    required: [menuLinksDropdownTitle]
    properties:
      menuLinksDropdownTitle:
        type: string

  printOptions:
    type: object
    additionalProperties: false
    required: [sensitiveInformationText]
    properties:
      sensitiveInformationText:
        type: string
        title: Classification text for printed documents
        description: Used to indicate the printed document contains sensitive information
      sensitiveInformationTooltipText:
        type: string
        title: Tooltip text for extra information about releasability
        description: Used to inform the user about the releasability of the document

  reportWorkflow:
    type: object
    additionalProperties: false
    required: [nbOfHoursQuarantineApproved, nbOfHoursApprovalTimeout]
    properties:
      nbOfHoursQuarantineApproved:
        type: integer
        minimum: 0
        title: The number of hours between the approval of the report and the automatic publication
        description: Used in the UI of an approved report to show how many hours are left till publication.
      nbOfHoursApprovalTimeout:
        type: integer
        minimum: 0
        title: The number of hours between the last action on a report and the automatic approval of the next step in the workflow
        description: Used to automatically advance a report to the next step in the workflow is manual action takes too long.

  maxTextFieldLength:
    type: integer
    minimum: 0
    title: The maximum number of characters allowed in selected text fields
    description: Used in the UI for report intent, report key outcomes, report next steps, authorization group description

  fields:
    type: object
    additionalProperties: false
    required: [task, attachment, report, person, position, organization, advisor, principal, superuser, administrator]
    properties:

      task:
        type: object
        additionalProperties: false
        required: [shortLabel, shortName, longLabel, longName, description, topLevel, subLevel, taskedOrganizations, responsiblePositions]
        properties:
          shortLabel:
            type: string
            title: The short label for this field
            description: Used in the UI where a short label for tasks is shown.
          shortName:
            "$ref": "#/$defs/inputField"
          longLabel:
            type: string
            title: The long label for this field
            description: Used in the UI where a long label for tasks is shown.
          longName:
            "$ref": "#/$defs/inputField"
          description:
            type: string
            title: The label for a task's description
            description: Used in the UI where a task's description is shown.
          topLevel:
            type: object
            additionalProperties: false
            required: [shortLabel, shortName, longLabel, longName]
            properties:
              shortLabel:
                "$ref": "#/properties/fields/properties/task/properties/shortLabel"
              shortName:
                "$ref": "#/properties/fields/properties/task/properties/shortName"
              longLabel:
                "$ref": "#/properties/fields/properties/task/properties/longLabel"
              longName:
                "$ref": "#/properties/fields/properties/task/properties/longName"
              assessments:
                type: object
                additionalProperties:
                  "$ref": "#/$defs/assessmentDef"
          subLevel:
            "$ref": "#/properties/fields/properties/task/properties/topLevel"
          projectedCompletion:
            "$ref": "#/$defs/inputField"
          plannedCompletion:
            "$ref": "#/$defs/inputField"
          parentTask:
            "$ref": "#/$defs/inputField"
          childrenTasks:
            type: string
            title: The sub tasks for this field
            description: Used in the UI where sub tasks for task are shown.
          taskedOrganizations:
            "$ref": "#/$defs/inputField"
          responsiblePositions:
            "$ref": "#/$defs/inputField"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      attachment:
        type: object
        additionalProperties: false
        required: [featureDisabled, disabled, shortLabel, shortName, caption, description, classification]
        properties:
          featureDisabled:
            type: boolean
            title: Whether attachments are enabled
            description: Used to enable/disable attachments
          disabled:
            type: boolean
            title: Whether users can upload attachments
            description: Used for restricting uploading functionality for all users
          shortLabel:
            type: string
            title: The short label for this field
            description: Used in the UI where a short label for attachments is shown.
          shortName:
            "$ref": "#/$defs/inputField"
          caption:
            "$ref": "#/$defs/inputField"
          description:
            type: string
            title: The label for a attachment's description
            description: Used in the UI where a attachment's description is shown.
          classification:
            "$ref": "#/$defs/customField"
          mimeTypes:
            type: array
            uniqueItems: true
            minItems: 1

      report:
        type: object
        additionalProperties: false
        required: [intent, atmosphere, atmosphereDetails, cancelled, nextSteps, reportText]
        properties:
          attachments:
            type: object
            additionalProperties: false
            required: [label]
            properties:
              label:
                type: string
                title: The label of the attachments
            title: Whether reports have attachments
            description: Used for attachments in reports
          canUnpublishReports:
            type: boolean
            default: false
            title: Whether reports can be unpublished
            description: Used for reports; if set to `true`, admins can change report state from published to draft
          intent:
            type: string
            title: The label for a report's intent
            description: Used in the UI where a report's intent is shown.
          atmosphere:
            type: string
            title: The label for a report's athmosphere
            description: Used in the UI where a report's athmosphere is shown.
          atmosphereDetails:
            type: string
            title: The label for report's athmosphere details
            description: Used in the UI where a report's athmosphere details are shown.
          cancelled:
            type: string
            title: The label for a report's cancelled
            description: Used in the UI where a report's cancelled is shown.
          nextSteps:
            "$ref": "#/$defs/inputField"
          keyOutcomes:
            type: string
            title: The label for report's key outcomes
            description: Used in the UI where report's key outcomes are shown.
          reportText:
            type: string
            title: The label for report's engagement details
            description: Used in the UI where report's engagement details are shown.
          location:
            type: object
            additionalProperties: false
            required: [filter]
            properties:
              filter:
                type: array
                uniqueItems: true
                items:
                  type: string
                  enum:
                    [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"
          attendeeGroups:
            type: array
            uniqueItems: true
            items:
              type: object
              additionalProperties: false
              title: Attendee-group
              required: [label, filter]
              properties:
                label:
                  type: string
                  title: The label of the attendee group
                filter:
                  type: object
                  title: Attendee group filters
                  properties:
                    orgUuid:
                      type: string
                      title: UUID of organisation membership to form

      person:
        type: object
        additionalProperties: false
        required: [firstName, lastName, domainUsername, openIdSubject, emailAddress, phoneNumber, country, rank, ranks, gender, endOfTourDate, biography, position, prevPositions]
        properties:
          firstName:
            type: string
            title: The label for a person's first name
            description: Used in the UI where a person's first name is shown.
          lastName:
            type: string
            title: The label for a person's last name
            description: Used in the UI where a person's last name is shown.
          position:
            type: string
            title: The label for person's current position
            description: Used in Person page UI where a person's position is shown.
          prevPositions:
            type: string
            title: The label for person's previous positions
            description: Used in Person page UI where a person's previous positions are shown.
          domainUsername:
            type: string
            title: The label for a person's domain username
            description: Used in the UI where a person's domain username is shown.
          openIdSubject:
            type: string
            title: The label for a person's OpenID subject
            description: Used in the UI where a person's OpenID subject is shown.
          emailAddress:
            "$ref": "#/$defs/inputField"
          phoneNumber:
            type: string
            title: The label for a person's phone number
            description: Used in the UI where a person's phone number is shown.
          country:
            type: string
            title: The label for a person's country
            description: Used in the UI where a person's country is shown.
          code:
            type: string
            title: The label for a person's code
            description: Used in the UI where a person's code is shown.
          rank:
            type: string
            title: The label for a person's rank
            description: Used in the UI where a person's rank is shown.
          ranks:
            type: array
            uniqueItems: true
            minItems: 1
            items:
              "$ref": "#/$defs/describedValue"
          gender:
            type: string
            title: The label for a person's gender
            description: Used in the UI where a person's gender is shown.
          endOfTourDate:
            type: string
            title: The label for a person's end of tour date
            description: Used in the UI where a person's end of tour date is shown.
          biography:
            type: string
            title: The label for a person's biography
            description: Used in the UI where a person's biography is shown.
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"
          customSensitiveInformation:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customSensitiveInformation"

      location:
        type: object
        additionalProperties: false
        required: [format]
        properties:
          superuserTypeOptions:
            type: array
            uniqueItems: true
            items:
              type: string
              enum:
                [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]
          format:
            type: string
            title: Default format for location
            enum: [LAT_LON, MGRS]
            description: Used in the UI where a location's coordinate is shown. Defaults to LAT_LON.
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      position:
        type: object
        additionalProperties: false
        required: [name, role]
        properties:
          name:
            type: string
            title: The label for a position's name
            description: Used in the UI where a position's name is shown.
          role:
            type: object
            additionalProperties: false
            required: [types]
            title: The label for a position's role
            description: Used in the UI where a position's roles are displayed as choices
            properties:
              label:
                type: string
                description: UI label of position-role
              types:
                type: object
                description: Enumeration of position role types
                required: [member, deputy, leader]
                additionalProperties: false
                properties:
                  member:
                    type: string
                    description: UI label of member position
                  deputy:
                    type: string
                    description: UI label of deputy position
                  leader:
                    type: string
                    description: UI label of leader position
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      organization:
        type: object
        additionalProperties: false
        required: [shortName, parentOrg, profile]
        properties:
          shortName:
            type: string
            title: The label for an organization's short name
            description: Used in the UI where an organization's short name is shown.
          parentOrg:
            type: string
            title: The label for an organization's parent organization
            description: Used in the UI where an organization's parent organization is shown.
          profile:
            type: string
            title: The label for an organization's profile
            description: Used in the UI where an organization's profile is shown
          assessments:
            type: object
            additionalProperties:
              "$ref": "#/$defs/assessmentDef"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      advisor:
        type: object
        additionalProperties: false
        required: [person, position, org]
        properties:

          person:
            type: object
            additionalProperties: false
            required: [name, countries, numberOfFieldsInLeftColumn, showPageOrderedFields]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a person inside an advisor organization is shown.
              countries:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The list of possible countries
                  description: Used in the UI where a country can be selected for a person inside an advisor organization.
              showPageOrderedFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  description: Ordered fields to show in Person Page in the Person info section
              showAsFullWidthFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: List of fields spanning over page width
                  description: Fields from the ordered fields, which should span over 2 columns
              numberOfFieldsInLeftColumn:
                type: number
                description: Used for dividing fields into 2 columns, make sure the columns are balanced
              assessments:
                type: object
                additionalProperties:
                  "$ref": "#/$defs/assessmentDef"

          position:
            type: object
            additionalProperties: false
            required: [name, type, code]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a position inside an advisor organization is shown.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of an advisor position.
              code:
                "$ref": "#/$defs/inputField"
              location:
                type: object
                additionalProperties: false
                required: [filter]
                properties:
                  filter:
                    type: array
                    uniqueItems: true
                    items:
                      type: string
                      enum:
                        [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]
              organizationsAdministrated:
                "$ref": "#/$defs/inputField"

          org:
            type: object
            additionalProperties: false
            required: [name, allOrgName, longName]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an advisor organization is shown.
              allOrgName:
                type: string
                title: The name used to represent 'all advisor organizations'
                description: Used in the UI to refer to all advisor organizations collectively.
              longName:
                "$ref": "#/$defs/inputField"
              identificationCode:
                "$ref": "#/$defs/inputField"
              location:
                type: object
                additionalProperties: false
                required: [filter]
                properties:
                  filter:
                    type: array
                    uniqueItems: true
                    items:
                      type: string
                      enum:
                        [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]
              administratingPositions:
                "$ref": "#/$defs/inputField"

      principal:
        type: object
        additionalProperties: false
        required: [person, position, org]
        properties:
          person:
            type: object
            additionalProperties: false
            required: [name, countries, numberOfFieldsInLeftColumn, showPageOrderedFields]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a person inside a principal organization is shown.
              countries:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The list of possible countries
                  description: Used in the UI where a country can be selected for a person inside a principal organization.
              showPageOrderedFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  description: Ordered fields to show in Person Page in the Person info section
              showAsFullWidthFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: List of fields spanning over page width
                  description: Fields from the ordered fields, which should span over 2 columns
              numberOfFieldsInLeftColumn:
                type: number
                description: Used for dividing fields into 2 columns, make sure the columns are balanced
              assessments:
                type: object
                additionalProperties:
                  "$ref": "#/$defs/assessmentDef"

          position:
            type: object
            additionalProperties: false
            required: [name, type, code]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a position inside a principal organization is shown.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of a principal position.
              code:
                "$ref": "#/$defs/inputField"
              location:
                type: object
                additionalProperties: false
                required: [filter]
                properties:
                  filter:
                    type: array
                    uniqueItems: true
                    items:
                      type: string
                      enum:
                        [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]

          org:
            type: object
            additionalProperties: false
            required: [name, allOrgName, longName, administratingPositions]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a principal organization is shown.
              allOrgName:
                type: string
                title: The name used to represent 'all principal organizations'
                description: Used in the UI to refer to all principal organizations collectively.
              longName:
                "$ref": "#/$defs/inputField"
              identificationCode:
                "$ref": "#/$defs/inputField"
              location:
                type: object
                additionalProperties: false
                required: [filter]
                properties:
                  filter:
                    type: array
                    uniqueItems: true
                    items:
                      type: string
                      enum:
                        [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, POINT_LOCATION, ADVISOR_LOCATION, PRINCIPAL_LOCATION]
              administratingPositions:
                "$ref": "#/$defs/inputField"

      superuser:
        type: object
        additionalProperties: false
        required: [position]
        properties:

          position:
            type: object
            additionalProperties: false
            required: [type]
            properties:
              name:
                type: string
                title: The permission name of this field
                description: Used in the UI for the type filter of position.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of a superuser position.

      administrator:
        type: object
        additionalProperties: false
        required: [position]
        properties:

          position:
            type: object
            additionalProperties: false
            required: [type]
            properties:
              name:
                  type: string
                  title: The permission name of this field
                  description: Used in the UI for the type filter of position.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of an administrator position.

  pinned_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of pinned organizations
      description: A list of organization that are pinned at the top of insights (e.g. rollups).

  non_reporting_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of non-reporting organizations
      description: A list of organizations that are considered non-reporting and as such will not be shown in insights.

  tasking_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of tasking organizations
      description: When defined, indicates which organizations maintain tasks. When not set, all organizations may contain tasks

  domainNames:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: string
      title: The list of possible (email) domain names
      description: Valid email domain names for this ANET instance; may contain wildcards.

  activeDomainNames:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: string
      title: The list of active (email) domain names
      description: Valid email domain names for this ANET instance; may contain wildcards.

  imagery:
    type: object
    additionalProperties: false
    properties:

      mapOptions:
        type: object
        required: [homeView]
        properties:
          crs:
            type: string
          homeView:
            type: object
            required: [location, zoomLevel]
            properties:
              location:
                type: array
              zoomLevel:
                type: number
            additionalProperties: false
          leafletOptions:
            type: object
            additionalProperties: true
        additionalProperties: false

      geoSearcher:
        required: [provider]
        properties:
          provider:
            type: string
            enum:
              - ESRI
              - OSM
          url:
            type: string

      baseLayers:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: object
          additionalProperties: false
          required: [name, type]
          properties:
            name:
              type: string
            default:
              type: boolean
            type:
              type: string
            url:
              type: string
            options:
              type: object
              additionalProperties: true
  dashboards:
    type: array
    items:
      additionalProperties: false
      properties:
        label:
          type: string
        data:
          type: string
        type:
          type: string
          enum:
            - board
            - kanban
            - decisives

  decisives:
    type: array

  automaticallyInactivateUsers:
    type: object
    required: [emailRemindersDaysPrior, checkIntervalInSecs]
    additionalProperties: false
    title: Auto account deactivation and email warnings.
    description: Automatically deactivate accounts which reach the end of tour date, and warn users in intervals prior to inactivation.
    properties:
      emailRemindersDaysPrior:
        type: array
        minItems: 1
        items:
          type: integer
          title: The list of days prior to account inactivation. An email will be sent to the user with a warning.
          description: Days to send a warning prior to account inactivation.
      ignoredDomainNames:
        type: array
        items:
          type: string
          title: The list of ignored (email) domain names. These will not be affected by auto-inactivation or be sent email warnings.
          description: Valid email domain names for this ANET instance; may contain wildcards.
      checkIntervalInSecs:
        type: integer
        minimum: 0
        title: The checking interval expressed in seconds.
        description: Used in the application to set the interval at which the deactivation (warning) checks will occur.
