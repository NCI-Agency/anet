"$schema": "https://json-schema.org/draft/2019-09/schema"
"$id": https://raw.githubusercontent.com/NCI-Agency/anet/main/src/main/resources/anet-schema.yml

#########################################################
### $defs
#########################################################
$defs:

  uuid:
    title: Universally unique Identifier  (UUID)
    type: string
    minLength: 36
    maxLength: 36

# base definition for a value with a description
  describedValue:
    type: object
    required: [value, description]
    properties:
      value:
        type: string
      description:
        type: string

# base definition for all Fields. Every field is assumed to have a label
  labeledField:
    type: object
    properties:
      label:
        type: string
        title: The label for this field
        description: Used in the UI where a label for the field is shown.
      color:
        type: string
        title: The color of the label, optional
        description: Used in the UI where a label for the field is shown.

# extensible definition for fields that allow free-form entry
  extensibleInputField:
    allOf:
      - "$ref": "#/$defs/labeledField"
      - properties:
          placeholder:
            type: string
            title: The placeholder for this field
            description: Used in the UI where a placeholder for the field is shown (example input).
          asA:
            type: string
            title: The bootstrap component class
            description: Used to determine how the user interface of this particular field looks.
          maxLength:
            type: integer
            minimum: 1
            description: Used in the UI for a text input field's maximum input length.
          style:
            type: object
            title: Optional styling for the bootstrap component class
            description: Used for styling this field.
            additionalProperties: true

# properties for input fields that can be made optional
  optionableInputFieldProperties:
    properties:
      optional:
        type: boolean
        default: false
        title: Whether this input field should be optional
        description: Used for making input fields optional that are by default required.

# properties for input fields that can be excluded
  excludableInputFieldProperties:
    properties:
      exclude:
        type: boolean
        default: false
        title: Whether this input field should be excluded
        description: Used for excluding input fields that are irrelevant.

# properties for fields that can be restricted
  restrictableFieldProperties:
    properties:
      authorizationGroupUuids:
        type: array
        uniqueItems: true
        items:
          type: string
          description: The list of authorization group uuid's that have access to this field.
            If not specified, anyone has access. An empty array denies everyone access.

# non-extensible definition for restrictable labeled fields
  restrictableLabeledField:
    unevaluatedProperties: false
    allOf:
      - "$ref": "#/$defs/labeledField"
      - "$ref": "#/$defs/restrictableFieldProperties"

# non-extensible definition for fields that allow free-form entry
  inputField:
    unevaluatedProperties: false
    "$ref": "#/$defs/extensibleInputField"

# non-extensible definition for restrictable fields that allow free-form entry
  restrictableInputField:
    unevaluatedProperties: false
    allOf:
      - "$ref": "#/$defs/extensibleInputField"
      - "$ref": "#/$defs/restrictableFieldProperties"

# non-extensible definition for input fields that can be made optional
  optionableInputField:
    unevaluatedProperties: false
    allOf:
      - "$ref": "#/$defs/extensibleInputField"
      - "$ref": "#/$defs/optionableInputFieldProperties"

# non-extensible definition for input fields that can be excluded
  excludableInputField:
    unevaluatedProperties: false
    allOf:
      - "$ref": "#/$defs/extensibleInputField"
      - "$ref": "#/$defs/excludableInputFieldProperties"

# non-extensible definition for input fields that can be made optional or excluded
  optionableExcludableInputField:
    unevaluatedProperties: false
    allOf:
      - "$ref": "#/$defs/extensibleInputField"
      - "$ref": "#/$defs/optionableInputFieldProperties"
      - "$ref": "#/$defs/excludableInputFieldProperties"

# definition for fields that present a choice to be selected from
  choiceField:
    unevaluatedProperties: false
    allOf:
    - "$ref": "#/$defs/extensibleInputField"
    - properties:
        choices:
          type: object
      required: [choices]

# definition for custom fields
  customField:
    type: object
    unevaluatedProperties: true # FIXME: ugly work-around for customSensitiveInformation
    required: [type]
    properties:
      test:
        type: string
        title: optional test condition for showing this field
      type:
        title: value type field
        type: string
        enum:
          - text
          - number
          - date
          - datetime
          - json
          - geo_location
          - enum
          - enumset
          - array_of_objects
          - anet_object
          - array_of_anet_objects
          - special_field
      typeError:
        title: custom value for type error
        type: string
      label:
        type: string
      helpText:
        type: string
      visibleWhen:
        type: string
      style:
        type: object
      placeholder:
        type: string
      asA:
        type: string
      htmlSize:
        type: number
      filters:
        type: array
        uniqueItems: true
        items:
          type: object
          title: filterType
          properties:
            filterField:
              type: string
            filterValue:
              type: [array, string, number, boolean]
      deprecated:
        type: boolean
      validations:
        type: array
        items:
          type: object
          properties:
            type:
              type: string
            params:
              type: array
          required: [type]
      aggregation:
        type: object
        properties:
          aggregationType:
            type: string
            enum: [countPerDate, countPerValue, countReportsByTask, likertScaleAndPieAgg, numbersList, objectsList, richText, valuesList]
          widget:
            type: string
            enum: [default, calendar, iqrBoxPlot, likertScale, likertScaleAndPie, pie, reportsByTask, reportsMap, richText]

    dependentSchemas:
      type:
        oneOf:
        - properties:
            type:
              enum: [text, number, date, datetime, json, geo_location]
        - properties:
            type:
              enum: [enum, enumset]
            choices:
              type: object
          required: [choices]
        - properties:
            type:
              enum: [array_of_objects]
            addButtonLabel:
              type: string
            objectLabel:
              type: string
            objectFields:
              type: object
              additionalProperties:
                "$ref": "#/$defs/customField"
          required: [addButtonLabel, objectLabel, objectFields]
        - properties:
            type:
              enum: [anet_object, array_of_anet_objects]
            types:
              type: array
              uniqueItems: true
              items:
                type: string
                enum: [Attachment, AuthorizationGroup, Event, EventSeries, Location, Organization, Person, Position, Report, Task]
          required: [types]
        - properties:
            type:
              enum: [special_field]
            widget:
              title: custom widget for field
              type: string
              enum: [likertScale, richTextEditor, default]
          required: [widget]
          dependentSchemas:
            widget:
              oneOf:
              - properties:
                  widget:
                    enum: [default]
              - properties:
                  widget:
                    enum: [richTextEditor]
              - properties:
                  widget:
                    enum: [likertScale]
                  levels:
                    type: array
                    uniqueItems: true
                    items:
                      type: object
                      title: likert scale range
                      properties:
                        color:
                          type: string
                        endValue:
                          type: number
                        label:
                          type: string
                required: [levels]

# definition for questions
  questions:
    title: questions to respond when assessing
    type: object
    additionalProperties:
      "$ref": "#/$defs/customField"

# definition for questionSets
  questionSets:
    title: subset of questions
    type: object
    additionalProperties:
      type: object
      additionalProperties: false
      properties:
        label:
          type: string
          title: label for this question set
        description:
          type: string
          title: description for this question set that will be shown as help text
        test:
          type: string
          title: optional test condition for showing this question set
        questions:
          "$ref": "#/$defs/questions"
        questionSets:
          "$ref": "#/$defs/questionSets"

# definition for assessment configuration
  assessmentDef:
    type: object
    unevaluatedProperties: false
    required: [recurrence]
    properties:
      recurrence:
        title: recurrence of an assessment
        type: string
        enum: [once, daily, weekly, biweekly, semimonthly, monthly, quarterly, semiannually, annually, ondemand]
        default: once
      allowFutureAssessments:
        type: boolean
        default: false
        title: Allow assessments to be in the future
        description: Allow assessment dates to be in the future for planning purposes.
      relatedObjectType:
        title: object type context in which the assessment will be made
        type: string
        enum: [report]
      test:
        type: string
        title: optional test condition for showing this assessment
      onDemandAssessmentExpirationDays:
        type: integer
        minimum: 1
        title: The number of days before an on-demand assessment expires
        description: Used in the UI to determine which on-demand assessments have expired
      label:
        title: assessment label
        type: string
        description: Used in the title of the assessment. If not specified, recurrence type is used instead and the assessments with the same recurrence type will have the same title!
      authorizationGroupUuids:
        type: object
        additionalProperties: false
        properties:
          read:
            title: The list of authorization group uuid's that have read access to this assessment. If not specified, anyone can read! An empty array denies everyone access (except those who can write).
            type: array
            uniqueItems: true
            items:
              type: string
          write:
            title: The list of authorization group uuid's that have write (i.e. create/update/delete) access to this assessment. If not specified, anyone can write! An empty array denies everyone access.
            type: array
            uniqueItems: true
            items:
              type: string
      questions:
        "$ref": "#/$defs/questions"
      questionSets:
        "$ref": "#/$defs/questionSets"
    dependentSchemas:
      recurrence:
        oneOf:
        - properties:
            recurrence:
              enum: [daily, weekly, biweekly, semimonthly, monthly, quarterly, semiannually, annually]
        - properties:
            recurrence:
              enum: [once]
          required: [relatedObjectType]
        - properties:
            recurrence:
              enum: [ondemand]
            questions:
              properties:
                allOf:
                - "$ref": "#/$defs/questions"
                - assessmentDate: "#/$defs/customField"
                - expirationDate: "#/$defs/customField"
              required: [assessmentDate]
      onDemandAssessmentExpirationDays:
        oneOf:
        - properties:
            questions:
              properties:
                expirationDate: "#/$defs/customField"
              required: [expirationDate]

# definition for custom sensitive information
  customSensitiveInformation:
    allOf:
    - "$ref": "#/$defs/customField"
    - properties:
        tooltipText:
          type: string
        authorizationGroupUuids:
          type: array
          uniqueItems: true
          items:
            type: string
            description: The list of authorization group uuid's that have access to this custom sensitive information. If not specified, anyone has access! An empty array denies everyone access.

#########################################################
### schema root
#########################################################
type: object
additionalProperties: false
required:
  - keycloakConfiguration
  - CONNECTION_ERROR_MSG
  - VERSION_CHANGED_MSG
  - SUPPORT_EMAIL_ADDR
  - useISO8601
  - eventTypeVisitBanUuid
  - featureMartGuiEnabled
  - dateFormats
  - calendarOptions
  - reportWorkflow
  - maxTextFieldLength
  - confidentialityLabel
  - siteClassification
  - fields
  - pinned_ORGs
  - non_reporting_ORGs
  - domainNames
  - activeDomainNames
  - emailNetworks
  - emailNetworkForNotifications
  - imagery
  - automaticallyAllowAllNewUsers
properties:
  keycloakConfiguration:
    type: object
    additionalProperties: true
    title: Client-side Keycloak configuration properties
    description: Automatically defined based on the `anet.keycloak-configuration` settings in `application.yml`

  CONNECTION_ERROR_MSG:
    type: string
    description: Banner text when the connection is lost
  VERSION_CHANGED_MSG:
    type: string
    description: Banner text when there is a new version of ANET
  SUPPORT_EMAIL_ADDR:
    type: string
    title: The support email address
    description: The email address where support requests can be sent.

  regularUsersCanCreateLocations:
    type: boolean
    default: false
    title: Whether regular users can also create locations
    description: Used for locations; if set to `true` all ANET users can create or edit locations

  engagementsIncludeTimeAndDuration:
    type: boolean
    default: false
    title: Whether engagements also include a time and a duration
    description: Used for report engagements; if set to `true`, you might also want to supply dateFormats.forms.inputWithTime and dateFormats.forms.longWithTime

  eventsIncludeStartAndEndTime:
    type: boolean
    default: false
    title: Whether events also include a time and a duration
    description: Used for events; if set to `true`, you might also want to supply dateFormats.forms.inputWithTime and dateFormats.forms.longWithTime

  eventTypeVisitBanUuid:
    title: The uuid of the event type "Visit Ban"
    type: string

  useISO8601:
    type: boolean
    title: Use ISO 8601?
    description: Whether to use ISO 8601 (for weekdays and week numbering) or US format.

  featureMartGuiEnabled:
    type: boolean
    default: false
    title: Whether the MART reports import GUI is enabled in ANET
    description: Used for MART; if set to `true`, ANET enables the MART reports import GUI

  dateFormats:
    type: object
    additionalProperties: false
    required: [email, excel, upToDateCheck, forms]
    properties:
      email:
        type: object
        additionalProperties: false
        required: [date]
        properties:
          date:
            type: string
            title: The date format for email
            description: Used in report emails; should be easy to read, e.g. "6 December 1998"; see https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
          withTime:
            type: string
            title: The date format including the time for email if `engagementsIncludeTimeAndDuration` is `true`
            description: Used to show the report engagement date/time in report emails; should be easy to read, e.g. "6 December 1998 @ 13:45"; see see https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
      excel:
        type: string
        title: The date format for Excel export
        description: Used in Excel exports of report lists, e.g. "6 December 1998"; see https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
      upToDateCheck:
        type: string
        title: The date format used in messages related to the up-to-date check when saving objects
        description: See https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/format/DateTimeFormatter.html#patterns for format specifiers.
      forms:
        type: object
        additionalProperties: false
        required: [input, displayShort, displayLong]
        properties:
          input:
            type: object
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The supported date formats for form input fields
                  description: Used in date inputs in the user interface, the first one is used as placeholder; should be easy to type, e.g. "06-12-1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: The supported date/time formats if `engagementsIncludeTimeAndDuration` is `true`
                  description: Used for the report engagement date input in the user interface, the first one is used as placeholder; should be easy to type, e.g. "06-12-1998 15:30"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
          displayShort:
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: string
                title: The short date format for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "6 December 1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: string
                title: The date format including the time for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "6 December 1998 @ 13:45"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
          displayLong:
            additionalProperties: false
            required: [date]
            properties:
              date:
                type: string
                title: The long date format for forms
                description: Used to show dates in forms in the user interface; should be easy to read, e.g. "Sunday, 6 December 1998"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.
              withTime:
                type: string
                title: The long date/time format if `engagementsIncludeTimeAndDuration` is `true`
                description: Used to show the report engagement date/time in the user interface; should be easy to read, e.g. "Sunday, 6 December 1998 @ 15:30"; see https://momentjs.com/docs/#/displaying/format/ for format specifiers.

  calendarOptions:
    type: object
    additionalProperties: false
    required: [attendeesType]
    properties:
      attendeesType:
        type: string
        description: This value determines which names are shown by default in the report calendar, either advisor or interlocutor.
        enum: [advisor, interlocutor]

  menuOptions:
    type: object
    additionalProperties: false
    required: [menuLinksDropdownTitle]
    properties:
      menuLinksDropdownTitle:
        type: string

  printOptions:
    type: object
    additionalProperties: false
    required: [sensitiveInformationText]
    properties:
      sensitiveInformationText:
        type: string
        title: Classification text for printed documents
        description: Used to indicate the printed document contains sensitive information
      sensitiveInformationTooltipText:
        type: string
        title: Tooltip text for extra information about releasability
        description: Used to inform the user about the releasability of the document

  reportWorkflow:
    type: object
    additionalProperties: false
    required: [optionalApprovalWorkflow, optionalPlanningApprovalWorkflow, nbOfHoursQuarantineApproved, nbOfHoursApprovalTimeout]
    properties:
      optionalApprovalWorkflow:
        type: boolean
        title: Whether having a report approval workflow (including the default workflow) is optional
        description: Used in the report approval logic to automatically approve an engagement report
                     if the workflow is optional and there is no defined workflow.
      optionalPlanningApprovalWorkflow:
        type: boolean
        title: Whether having a report planning approval workflow (including the default workflow) is optional
        description: Used in the report approval logic to automatically approve a planned engagement report
                     if the workflow is optional and there is no defined planning workflow.
      nbOfHoursQuarantineApproved:
        type: integer
        minimum: 0
        title: The number of hours between the approval of the report and the automatic publication
        description: Used in the UI of an approved report to show how many hours are left till publication.
      nbOfHoursApprovalTimeout:
        type: integer
        minimum: 0
        title: The number of hours between the last action on a report and the automatic approval of the next step in the workflow
        description: Used to automatically advance a report to the next step in the workflow is manual action takes too long.

  maxTextFieldLength:
    type: integer
    minimum: 0
    title: The maximum number of characters allowed in selected text fields
    description: Used in the UI for report intent, report key outcomes, report next steps, community description

  confidentialityLabel:
    type: object
    required: [label, choices]
    additionalProperties: false
    properties:
      label:
        type: string
      choices:
        type: object
        additionalProperties:
          type: object
          required: [color, policy]
          additionalProperties: false
          properties:
            color:
              type: string
            policy:
              type: string
            classification:
              type: string
            releasableTo:
              type: array
              uniqueItems: true
              items:
                type: string

  siteClassification:
    type: string

  fields:
    type: object
    additionalProperties: false
    required: [task, attachment, authorizationGroup, eventSeries, event, report, person,
               position, organization, advisor, interlocutor, regular, superuser, administrator]
    properties:

      task:
        type: object
        additionalProperties: false
        required: [allTasksLabel, status, shortLabel, shortName, longLabel, longName, description, selectable,
                   projectedCompletion, plannedCompletion, parentTask, childrenTasks,
                   taskedOrganizations, responsiblePositions]
        properties:
          allTasksLabel:
            type: string
            title: The label used to represent 'all tasks'
            description: Used in the UI to refer to all tasks.
          status:
            "$ref": "#/$defs/labeledField"
          shortLabel:
            type: string
            title: The short label for this field
            description: Used in the UI where a short label for tasks is shown.
          shortName:
            "$ref": "#/$defs/inputField"
          longLabel:
            type: string
            title: The long label for this field
            description: Used in the UI where a long label for tasks is shown.
          longName:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          selectable:
            "$ref": "#/$defs/labeledField"
          projectedCompletion:
            "$ref": "#/$defs/excludableInputField"
          plannedCompletion:
            "$ref": "#/$defs/excludableInputField"
          parentTask:
            "$ref": "#/$defs/inputField"
          childrenTasks:
            "$ref": "#/$defs/labeledField"
          taskedOrganizations:
            "$ref": "#/$defs/inputField"
          responsiblePositions:
            "$ref": "#/$defs/inputField"
          assessments:
            type: object
            additionalProperties:
              "$ref": "#/$defs/assessmentDef"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      attachment:
        type: object
        additionalProperties: false
        required: [featureDisabled, restrictToAdmins, fileName, caption, description]
        properties:
          featureDisabled:
            type: boolean
            title: Whether attachments are enabled
            description: Used to enable/disable attachments
          restrictToAdmins:
            type: boolean
            title: Whether the attachment functionality is restricted to admins
            description: Used for restricting attachment functionality to admins
          fileName:
            "$ref": "#/$defs/labeledField"
          caption:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          fileTypes:
            type: array
            title: List of file types allowed for uploading attachments
            description: Used for restricting the types of attachments that can be uploaded
            items:
              title: File type description
              type: object
              additionalProperties: false
              required: [mimeType]
              properties:
                mimeType:
                  type: string
                  title: MIME type
                avatar:
                  type: boolean
                  title: True if file type may be used as an avatar
                  default: false
                crop:
                  type: boolean
                  title: Should be true if the file type is an image which can be cropped
                  default: false
            uniqueItems: true
            minItems: 1

      authorizationGroup:
        type: object
        additionalProperties: false
        required: [status, name, description, distributionList, forSensitiveInformation, administrativePositions, authorizationGroupRelatedObjects]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          name:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          distributionList:
            "$ref": "#/$defs/labeledField"
          forSensitiveInformation:
            "$ref": "#/$defs/labeledField"
          administrativePositions:
            "$ref": "#/$defs/labeledField"
          authorizationGroupRelatedObjects:
            "$ref": "#/$defs/labeledField"

      eventSeries:
        type: object
        additionalProperties: false
        required: [status, name, description, ownerOrg, hostOrg, adminOrg]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          name:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          ownerOrg:
            "$ref": "#/$defs/inputField"
          hostOrg:
            "$ref": "#/$defs/inputField"
          adminOrg:
            "$ref": "#/$defs/inputField"

      event:
        type: object
        additionalProperties: false
        required: [status, name, type, description, startDate, endDate, outcomes, ownerOrg, hostOrg,
                   adminOrg, eventSeries, location, organizations, people, tasks]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          name:
            "$ref": "#/$defs/inputField"
          type:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          startDate:
            "$ref": "#/$defs/inputField"
          endDate:
            "$ref": "#/$defs/inputField"
          outcomes:
            "$ref": "#/$defs/inputField"
          ownerOrg:
            "$ref": "#/$defs/inputField"
          hostOrg:
            "$ref": "#/$defs/inputField"
          adminOrg:
            "$ref": "#/$defs/inputField"
          eventSeries:
            "$ref": "#/$defs/inputField"
          location:
            "$ref": "#/$defs/inputField"
          organizations:
            "$ref": "#/$defs/inputField"
          people:
            "$ref": "#/$defs/inputField"
          tasks:
            "$ref": "#/$defs/inputField"

      report:
        type: object
        additionalProperties: false
        required: [intent, engagementDate, duration, atmosphere, atmosphereDetails, cancelled,
                   cancelledReason, nextSteps, keyOutcomes, reportText, location, reportPeople,
                   event, reportCommunities]
        properties:
          canUnpublishReports:
            type: boolean
            default: false
            title: Whether reports can be unpublished
            description: Used for reports; if set to `true`, admins can change report state from published to draft
          intent:
            "$ref": "#/$defs/inputField"
          engagementDate:
            "$ref": "#/$defs/inputField"
          duration:
            "$ref": "#/$defs/inputField"
          atmosphere:
            "$ref": "#/$defs/optionableExcludableInputField"
          atmosphereDetails:
            "$ref": "#/$defs/excludableInputField"
          cancelled:
            "$ref": "#/$defs/inputField"
          cancelledReason:
            "$ref": "#/$defs/inputField"
          nextSteps:
            "$ref": "#/$defs/optionableExcludableInputField"
          keyOutcomes:
            "$ref": "#/$defs/optionableExcludableInputField"
          reportText:
            "$ref": "#/$defs/inputField"
          location:
            required: [filter]
            allOf:
            - "$ref": "#/$defs/extensibleInputField"
            - properties:
                filter:
                  type: array
                  uniqueItems: true
                  items:
                    type: string
                    enum:
                      [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, COUNTRY, POINT_LOCATION, TOWN, MUNICIPALITY]
          reportPeople:
            required: [optionalAttendingAuthor, optionalPrimaryAdvisor, optionalPrimaryPrincipal]
            properties:
              optionalAttendingAuthor:
                type: boolean
                default: false
                description: Defines if having an attending author for a report is optional
              optionalPrimaryAdvisor:
                type: boolean
                default: false
                description: Defines if having a primary advisor for a report is optional
              optionalPrimaryPrincipal:
                type: boolean
                default: false
                description: Defines if having a primary principal for a report is optional
              attendeeGroups:
                type: array
                uniqueItems: true
                items:
                  type: object
                  additionalProperties: false
                  title: Attendee-group
                  required: [label, filter]
                  properties:
                    label:
                      type: string
                      title: The label of the attendee group
                    filter:
                      type: object
                      title: Attendee group filters
                      properties:
                        orgUuid:
                          type: string
                          title: UUID of organisation membership to form
          event:
            "$ref": "#/$defs/inputField"
          reportCommunities:
            "$ref": "#/$defs/excludableInputField"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      person:
        type: object
        additionalProperties: false
        required: [status, firstName, lastName, position, prevPositions, users,
                   emailAddresses, phoneNumber, country, code, rank, ranks, gender, endOfTourDate,
                   biography, authorizationGroups]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          firstName:
            "$ref": "#/$defs/inputField"
          lastName:
            "$ref": "#/$defs/inputField"
          position:
            "$ref": "#/$defs/inputField"
          prevPositions:
            "$ref": "#/$defs/labeledField"
          user:
            "$ref": "#/$defs/inputField"
          users:
            "$ref": "#/$defs/labeledField"
          emailAddresses:
            "$ref": "#/$defs/restrictableLabeledField"
          phoneNumber:
            "$ref": "#/$defs/restrictableInputField"
          country:
            "$ref": "#/$defs/optionableInputField"
          code:
            "$ref": "#/$defs/excludableInputField"
          rank:
            "$ref": "#/$defs/inputField"
          ranks:
            type: array
            uniqueItems: true
            minItems: 1
            items:
              "$ref": "#/$defs/describedValue"
          gender:
            "$ref": "#/$defs/optionableExcludableInputField"
          endOfTourDate:
            "$ref": "#/$defs/optionableExcludableInputField"
          biography:
            "$ref": "#/$defs/inputField"
          authorizationGroups:
            "$ref": "#/$defs/labeledField"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"
          customSensitiveInformation:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customSensitiveInformation"

      location:
        type: object
        additionalProperties: false
        required: [status, name, type, digram, trigram, description, superuserTypeOptions, format]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          name:
            "$ref": "#/$defs/inputField"
          type:
            "$ref": "#/$defs/inputField"
          digram:
            "$ref": "#/$defs/inputField"
          trigram:
            "$ref": "#/$defs/inputField"
          description:
            "$ref": "#/$defs/inputField"
          superuserTypeOptions:
            type: array
            uniqueItems: true
            items:
              type: string
              enum:
                [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, COUNTRY, POINT_LOCATION, TOWN, MUNICIPALITY]
          regularuserTypeOptions:
            type: array
            uniqueItems: true
            items:
              type: string
              enum:
                [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, COUNTRY, POINT_LOCATION, TOWN, MUNICIPALITY]
          format:
            type: string
            title: Default format for location
            enum: [LAT_LON, MGRS]
            description: Used in the UI where a location's coordinate is shown. Defaults to LAT_LON.
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      position:
        type: object
        additionalProperties: false
        required: [status, name, type, superuserType, code, organization, location, organizationsAdministrated, role, description, emailAddresses, authorizationGroups]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          name:
            "$ref": "#/$defs/inputField"
          type:
            "$ref": "#/$defs/inputField"
          superuserType:
            "$ref": "#/$defs/inputField"
          code:
            "$ref": "#/$defs/excludableInputField"
          organization:
            "$ref": "#/$defs/inputField"
          location:
            required: [filter]
            allOf:
            - "$ref": "#/$defs/extensibleInputField"
            - properties:
                filter:
                  type: array
                  uniqueItems: true
                  items:
                    type: string
                    enum:
                      [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, COUNTRY, POINT_LOCATION, TOWN, MUNICIPALITY]
          organizationsAdministrated:
            "$ref": "#/$defs/inputField"
          emailAddresses:
            "$ref": "#/$defs/restrictableLabeledField"
          authorizationGroups:
            "$ref": "#/$defs/labeledField"
          role:
            type: object
            unevaluatedProperties: false
            required: [types]
            description: Used in the UI where a position's roles are displayed as choices
            allOf:
              - "$ref": "#/$defs/extensibleInputField"
              - properties:
                  types:
                    type: object
                    additionalProperties: false
                    description: Enumeration of position role types
                    required: [member, deputy, leader]
                    properties:
                      member:
                        type: string
                        description: UI label of member position
                      deputy:
                        type: string
                        description: UI label of deputy position
                      leader:
                        type: string
                        description: UI label of leader position
          description:
            "$ref": "#/$defs/inputField"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      organization:
        type: object
        additionalProperties: false
        required: [status, shortName, longName, identificationCode, type, parentOrg, childrenOrgs,
                   location, administratingPositions, profile, app6context, app6standardIdentity, app6symbolSet, app6hq,
                   app6amplifier, app6entity, app6entityType, app6entitySubtype, app6sectorOneModifier, app6sectorTwoModifier,
                   emailAddresses, authorizationGroups]
        properties:
          status:
            "$ref": "#/$defs/labeledField"
          shortName:
            "$ref": "#/$defs/inputField"
          longName:
            "$ref": "#/$defs/inputField"
          identificationCode:
            "$ref": "#/$defs/excludableInputField"
          type:
            "$ref": "#/$defs/inputField"
          parentOrg:
            "$ref": "#/$defs/inputField"
          childrenOrgs:
            "$ref": "#/$defs/labeledField"
          location:
            required: [filter]
            allOf:
            - "$ref": "#/$defs/extensibleInputField"
            - properties:
                filter:
                  type: array
                  uniqueItems: true
                  items:
                    type: string
                    enum:
                      [VIRTUAL_LOCATION, PHYSICAL_LOCATION, GEOGRAPHICAL_AREA, COUNTRY, POINT_LOCATION, TOWN, MUNICIPALITY]
          administratingPositions:
            "$ref": "#/$defs/inputField"
          profile:
            "$ref": "#/$defs/inputField"
          app6context:
            "$ref": "#/$defs/labeledField"
          app6standardIdentity:
            "$ref": "#/$defs/labeledField"
          app6symbolSet:
            "$ref": "#/$defs/labeledField"
          app6hq:
            "$ref": "#/$defs/labeledField"
          app6amplifier:
            "$ref": "#/$defs/labeledField"
          app6entity:
            "$ref": "#/$defs/labeledField"
          app6entityType:
            "$ref": "#/$defs/labeledField"
          app6entitySubtype:
            "$ref": "#/$defs/labeledField"
          app6sectorOneModifier:
            "$ref": "#/$defs/labeledField"
          app6sectorTwoModifier:
            "$ref": "#/$defs/labeledField"
          emailAddresses:
            "$ref": "#/$defs/restrictableLabeledField"
          authorizationGroups:
            "$ref": "#/$defs/labeledField"
          assessments:
            type: object
            additionalProperties:
              "$ref": "#/$defs/assessmentDef"
          customFields:
            type: object
            additionalProperties:
              "$ref": "#/$defs/customField"

      advisor:
        type: object
        additionalProperties: false
        required: [person, org]
        properties:
          person:
            type: object
            additionalProperties: false
            required: [name, numberOfFieldsInLeftColumn, showPageOrderedFields]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an advisor is shown.
              showPageOrderedFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  description: Ordered fields to show in Person Page in the Person info section
              showAsFullWidthFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: List of fields spanning over page width
                  description: Fields from the ordered fields, which should span over 2 columns
              numberOfFieldsInLeftColumn:
                type: number
                description: Used for dividing fields into 2 columns, make sure the columns are balanced
          org:
            type: object
            additionalProperties: false
            required: [name]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an advisor organization is shown.

      interlocutor:
        type: object
        additionalProperties: false
        required: [person, org]
        properties:
          person:
            type: object
            additionalProperties: false
            required: [name]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an interlocutor is shown.
          org:
            type: object
            additionalProperties: false
            required: [name]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an interlocutor organization is shown.

      regular:
        type: object
        additionalProperties: false
        required: [person, position, org]
        properties:

          person:
            type: object
            additionalProperties: false
            required: [name, numberOfFieldsInLeftColumn, showPageOrderedFields]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a person inside an organization is shown.
              showPageOrderedFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  description: Ordered fields to show in Person Page in the Person info section
              showAsFullWidthFields:
                type: array
                uniqueItems: true
                minItems: 1
                items:
                  type: string
                  title: List of fields spanning over page width
                  description: Fields from the ordered fields, which should span over 2 columns
              numberOfFieldsInLeftColumn:
                type: number
                description: Used for dividing fields into 2 columns, make sure the columns are balanced
              assessments:
                type: object
                additionalProperties:
                  "$ref": "#/$defs/assessmentDef"

          position:
            type: object
            additionalProperties: false
            required: [name, type]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where a position inside an organization is shown.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of a position.

          org:
            type: object
            additionalProperties: false
            required: [name, allOrgName]
            properties:
              name:
                type: string
                title: The name of this field
                description: Used in the UI where an organization is shown.
              allOrgName:
                type: string
                title: The name used to represent 'all organizations'
                description: Used in the UI to refer to all organizations collectively.

      superuser:
        type: object
        additionalProperties: false
        required: [position]
        properties:

          position:
            type: object
            additionalProperties: false
            required: [type]
            properties:
              name:
                type: string
                title: The permission name of this field
                description: Used in the UI for the type filter of position.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of a superuser position.

      administrator:
        type: object
        additionalProperties: false
        required: [position]
        properties:

          position:
            type: object
            additionalProperties: false
            required: [type]
            properties:
              name:
                  type: string
                  title: The permission name of this field
                  description: Used in the UI for the type filter of position.
              type:
                type: string
                title: The permissions type of this field
                description: Used in the UI for the type/permissions of an administrator position.

  pinned_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of pinned organizations
      description: A list of organization that are pinned at the top of insights (e.g. rollups).

  non_reporting_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of non-reporting organizations
      description: A list of organizations that are considered non-reporting and as such will not be shown in insights.

  tasking_ORGs:
    type: array
    uniqueItems: true
    items:
      type: string
      title: The list of tasking organizations
      description: When defined, indicates which organizations maintain tasks. When not set, all organizations may contain tasks

  domainNames:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: string
      title: The list of possible (email) domain names
      description: Valid email domain names for this ANET instance; may contain wildcards.

  activeDomainNames:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: string
      title: The list of active (email) domain names
      description: Valid email domain names for this ANET instance; may contain wildcards.

  emailNetworks:
    type: array
    uniqueItems: true
    minItems: 1
    items:
      type: string
      title: The list of supported email networks
      description: Valid email networks for this ANET instance; e.g Internet, NS.

  emailNetworkForNotifications:
    type: string
    title: The email network to be used for email notifications sent by ANET
    description: Should be one of the networks listed under `emailNetworks` above.

  imagery:
    type: object
    additionalProperties: false
    properties:

      mapOptions:
        type: object
        required: [homeView]
        properties:
          crs:
            type: string
          homeView:
            type: object
            additionalProperties: false
            required: [location, zoomLevel]
            properties:
              location:
                type: array
              zoomLevel:
                type: number
          leafletOptions:
            type: object
            additionalProperties: true
        additionalProperties: false

      geoSearcher:
        required: [provider]
        properties:
          provider:
            type: string
            enum:
              - ESRI
              - OSM
          url:
            type: string

      baseLayers:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: object
          additionalProperties: false
          required: [name, type]
          properties:
            name:
              type: string
            default:
              type: boolean
            type:
              type: string
            url:
              type: string
            options:
              type: object
              additionalProperties: true
  chatAssistantUrl:
    type: string
  dashboards:
    type: array
    items:
      additionalProperties: false
      properties:
        label:
          type: string
        data:
          type: string
        type:
          type: string
          enum:
            - kanban
            - decisives

  decisives:
    type: array

  automaticallyAllowAllNewUsers:
    type: boolean
    title: Auto account verification.
    description: Whether newly onboarded users should be automatically verified; when false, admins must explicitly verify new users.

  automaticallyInactivateUsers:
    type: object
    additionalProperties: false
    required: [emailRemindersDaysPrior, checkIntervalInSecs]
    title: Auto account deactivation and email warnings.
    description: Automatically deactivate accounts which reach the end of tour date, and warn users in intervals prior to inactivation.
    properties:
      emailRemindersDaysPrior:
        type: array
        minItems: 1
        items:
          type: integer
          title: The list of days prior to account inactivation. An email will be sent to the user with a warning.
          description: Days to send a warning prior to account inactivation.
      ignoredDomainNames:
        type: array
        items:
          type: string
          title: The list of ignored (email) domain names. These will not be affected by auto-inactivation or be sent email warnings.
          description: Valid email domain names for this ANET instance; may contain wildcards.
      checkIntervalInSecs:
        type: integer
        minimum: 0
        title: The checking interval expressed in seconds.
        description: Used in the application to set the interval at which the deactivation (warning) checks will occur.
      initialDelayInSecs:
        type: integer
        minimum: 0
        title: The optional initial delay before starting the account deactivation task expressed in seconds.
        description: Used in the application to set the initial delay after which the first deactivation (warning) checks will occur;
                     when not specified, it will use the checkIntervalInSecs setting.

  martDictionaryExport:
    title: Configuration of MART ANET dictionary export
    type: object
    additionalProperties: false
    required:
      - tasks
      - municipalityGroupUuid
      - regionalCommands
    properties:
      tasks:
        type: object
        additionalProperties: false
        required:
          - domainUuid
          - factorUuid
          - topicUuid
        properties:
          domainUuid:
            title: UUID referring to Domain top level task
            "$ref": "#/$defs/uuid"
          factorUuid:
            title: UUID referring to Factor top level task
            "$ref": "#/$defs/uuid"
          topicUuid:
            title: UUID referring to Topic top level task
            "$ref": "#/$defs/uuid"
      municipalityGroupUuid:
        title: UUID referring to KFOR Municipality group
        "$ref": "#/$defs/uuid"
      regionalCommands:
        title: List of UUID referring to Regional Command organizations
        type: array
        uniqueItems: true
        minLength: 1
        items:
          "$ref": "#/$defs/uuid"
      municipalityCustomFields:
        title: List of custom fields for a municipality
        type: array
        uniqueItems: true
        minLength: 0
        items:
          type: string
      locationCustomFields:
        title: List of custom fields for a location
        type: array
        uniqueItems: true
        minLength: 0
        items:
          type: string
